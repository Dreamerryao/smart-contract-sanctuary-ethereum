// SPDX-License-Identifier: MIT LICENSE

pragma solidity 0.8.9;

import "@openzeppelin/contracts/utils/math/Math.sol";

contract CombatPower {
    bytes constant cpData = hex"85229920a5321445a1842c2627b161342701230474c03eb6192b7230592c268034b831965042bd796a98c4687418281b438a691c6e05811ea201748b0b783c7d2ab2067db33d765c686d164d13801167b65d9741755a33ba816e213f88768d3c2f5843182ac0c4679d1c55990f91ad44b9c2b491196641734eb089c63d6c1a0634722a9cc8afa4025f744a2250c87d51069e5a88591b1b3286b97f9a1e83982f294a6c99bf8d8c2c1a8c35967b2166764e27a267186d5446673e1108911168843ec34c7541b23b650bc84e40a34cc23bb1338fb66b99b4756682613a257a571422a5bc9b6512a23805782e384803bb359b2a568f4313383d86b1330fc2c0206b2f1a8dab9a49af2a062ba32659487cb94c98984abc096d247a56bc613b9035ae712a177c93216fbc293c45a977681b1f7e9db9be066550423417826402439a0d31853b6fc89bc39617c3752fbe76681d81815ec26c1c2608a67c889b0b3e2d1c68629692bd43a624ac5ec30e15c3601216be1ba48964888a71124445a1071a2e5a1db4a9c473520d687a3254694238ab9f0b7d5018690590aa5c2c311c069eb3aa6fba621c1fab847ab561724bba6da146c50cadc111af18b1228c2186c02272774b40694068809b97c6b913661b4238ab38a8af56beacc50c81ab56b1a9803122c326911d292f5659a14dc5628f4f0f810f334e532a0a3e49b46522c5154b5eb45bc518baa4a14d8e006e3491a75ab6407c163b89c1c128917b78a90b54636687acc18973b25e241d449960132a317e343f0e4f9d17737b0081737934418ac8880633bfaa26c22a0d3735389ca52da87ebd1fb5478b306d50966a797c9f179db4a0bca5c412980a440cb6bf1e438fc60b065177752dbc6916483e6322710e2a3b427d76b36a68808e768e4ea31c0608107234c708982ea4b598a20e2675a9b07d4c8c56369a70a894378423a1c2aa34017f32281c57b8500573116f0f491a20bd9299a9658e2c08844c8dbb85565d301536570a550b1d27b5260b055b7dc3bd6fad52c61382beaf9c549208c81655be339f2e2a5286c362014e3a25bb0d900ec3a6abae7533c125a7b68b9a40c1060d3b72937c382369652f5155a7291c05c13ba1b7c68a201d9b24315094888110a182115b92b08406678e576ab67b6f6a7ea40d256f67508b497d934a656748823b7011774aa411065832490d2b97977f7a2696b5b0a1155d6f8c333879168a0da37fc0b290b6141a162420797eaa04a4241aa54c0ac864391a3a483e2db518b8bfa80c535e7667609d0a893c9c8d768a7e8467c28c54be6c276f0b552dc10d3251471e8900a3c0bbbb8044b72293afc08756c39f609287541511ac6fb5a393195aa1a6912ea2393171358991502d02261b2835a4332360943a640a6a541b520599811781b3028707500c308563b0a021ae66bf6017aa5b6b642d501cbb205d4a8ea4767219b9178c8a7745aa62a7107d24623ca388381126b586102b127452252011a5541949a92d0da6b11fac12183216c16776bb49831d3d9a6d5a8a786972af69551f341123891bbc873c1555274e0b4b68735f303a73ad59897067b25b8fb97881b5b8703760980a25283168a60c728951345fc3004e75931750147d00233ca93bb6604f493f42616404548f91ab84c41d062fa1c39a0181ad2b2d39b9b2b34ebc08c6810465356b0d8b5d2f4a364c97b82b19ae13b9174d80ad0a764b864f526271bd1e6e8f7229442a76040f9fa666a60bc081629c440db74193383d23bb4b359f964abd5264759678c05e6eb27150c62d2352acc1067b1a3d0aa556b08f03ab694bc81d9e300e988a76680e73117e9b0931005f7aaf37369f238a0435ab79329868312b202987a20d665e4e12760c567ac5412435143ca1c82b6d07c4884c1401b85a0ec617633b8f0880ba221a5d1433790c3069938a9c803fa568642c72397f1c40509060216bba1fc70f95ae3e1f9997349cadc10f72bba9449c7498640956a4329c2c906c2a4e994aa45b7f10931a5c1472062d734d02363e816208c8a8aa7cb0729884bd2e7385bf7e573e7b5d328d209d36a281537487a30f7ba051348c589cc3853ac220bb122809520fa9a851593e4c632f307a532c9839844ac66fb40d3f9e2b91993d7c42a514bc88b1af25619027aba4c3af97931f065740128c61979d20842984449f5ac6389d33a11fbe288c784704c759a17ac5b977c6003d88c196a5c236667767ae8314b5bc0c6686313c1b9e5b91626b08358124683f8498a8c31c803313262e20186281297e7b9375b9543784acb70c1a1817570c576d0b23ada28ca3486488b483276a42a5184e03816762138d2a029c7ea1b12f6e1bc6108b1bbe8b946d17c231a6a57939998ca27143670e352a278f4e45b4253a25babc2176798c32c2bd3389581b2c9f0857514c1e5332ad1b018216581a1c33775094a67b5b4c658482bc155f052d1a2682a2003cbfbb03024e0cb973624abda9ac02a78218a03c46151e218c2c995e0a58c14b03bb824e1568bb3fc09133bd349bc52f2125116936608b69830b0eb0c1aa2ab58229a66633b2476c122c2a1f21371cc55f835b6b16b95f0c0d9f073d07522a2490b9424559c528be5362be9d207a97070669abbe916b1f51428b50553cc892bf5e5674b77c5831b7033d3b73a2619d3546c220950c6d101106a06e5a685c9e8f70b03a3d776e84131faf130778a9b6b0c0bd5a920a07512e874dc117662f1b1b1f82713699a743ba1e65886dc31100595e1e150881ae2a068b42826a2b71c6a33d7a77756c5a5c42a2c4511b462d4e13bf268d5137a50977002321b98f3b4b9880085f1f8d0a07242b1141805cb42a0261bc667872939b899eac31c40e13380d215d9a759b6db661c6c6498f28842132982b22355f5b438c497f2da664136785a5426dbb3ebda3b61314aa934db52d615383bcc4aab33283572c0f4933ab586174072a6d9e165a07a8b770875c5e390dad33a3b12e99243caab49c4c05a0a4a2a885a5c86e6e918b9a4b3ea26b3a3f5b960b76be45b41a175e82124e73718fb115947114ab13386cc61b75570e2124be962113960562c38e3224a54e6b102016402aa2472c9374108e2e879da7562e59062d8c75b851c2936b58c664364f33238075a9beab529913285226799c6e5cb7085857aa5f665a197628623b8987088b532f97644db96829c57cbb8320b8205ab0985d214b0512b4c667148c4d3d9b95790a9cc30a779c238a55c8360341ac67618a1e82b59aa06b59624973510d8868b370c7653c573110516a8bb9af3688886548903e012c4a3a20441055071a6f4883376d854aaf02bb8c2720245e5058bc0ac2033e9f0f1048a4158e117b03af8474178dadb823221543138ab54cc07b6e81bb9f6c94ac6b0b8c907f39a73f6516899a45a046719815918a693354a20ca7b58238a66e1223bac65e3c2d71139e3ac5b911791573c714563983414746c533228b5a36baba3abab8806d5f73bb825d309f3bbb2746b09839093b1f3b5c3d5a051036324f476a3ca950ab356d2d1d438b3981753e6982847f2abb064c3b889132a144a17205c83b005cc38e650c1a742035c693911b5408ae0dc7bcb24a81b96177b54ca99472b64440ba45a0c24f4003658e0a8b7421687d2d505da756647a9eac0c64a290ae4f123545336e3b241d0db78154bac81c2378bd8391588b42ac1e54a0022b135abb16681f9e868e2322539a5e788b474ea64e84940b2d5a5c4257420a580a0a437eada80e665b323f81983d2116607a7a29bead9787c632c523bd257f3315c7c8be10821a831890683c6643966c469c473219a460c55b2bb833bead89a79f126d0a2772a818817b44b9641762306e005c3f83b03c7b3d7d7f1e7e025c407ca06d8d6e5f2e053b5da40055bf6e501d8a558a6c461340c26e873b942589bc7e12072a5dc07c88bc216e10c546155c849c817b71b61f1ec4003233046f1d511fc1baa9a950c43c2f278b86ae1b4524113367c0ae701f0987c022942b08854a578bc292be1a9d910e563f555d3d70506d694b7bbd48993e3f304fb98230ae171f351e30b88dc15eb84785bc314e99530a3245745f27b58f90939c55364caf9e563dc20f82b0c29b87a03f7554583e1b48278c6da0c296acb30a451c04a63c96a521718686c68aa102c4afa93c7e4b93179bb948021d1d642f6b0f6bae3ea7c361538763168e3e0bc74030ae1f8b87a542c2c1b50595c087bb7f4c517da80c9d637c755e7a1402c77c051a6f704f9e6058478a8e8e8225a401892a2d6a1f3a6172269611836d201702297e5f60ab93c65d87c87d14bfacbec6b1942725526941585d7d183b6078be0b108eb9463abf04134f6500503f1876b7b435757156c8bf6a1a888ba1879c0c6f08378b94c47e811d899b1f7c2c0939706f50c50e17b96d9e0c43941057403157a5b030a348c184a9783a594d492446bf9b370e9da4392fa906a6c188575a253d2331c3302a537a4dbd1f797b10259d45bf354898be2d800d049c4900640394c85c6dc4518d401664a893a4bd92b00905231f559f1790370659b00a04a37756c4595f439627136438030d41367535924619166d04be7c27bf5113932b954b55538707298e44a3472f03b089b7b27680128732496b974e5f4a1396353db099ae4c4bb2b53b46a2b3be07b39fa99135bf10985695ac06515fc4712121b7107d2846072aa19473134602077c5517a5c897979795b7898e236da021326176bd360b6a9eae095cbc4c7d9a902e1840126a42802e6b42c54a3c27141f2c4344be4b0d4a770da2185989622fc567af7b7f0b06c33d52581380a7268ba25a099e759202013717c754ac418941019dad4e3a03ad7c914b2ba32d9f62aa43c413039c72190f1d8402077665a71e1352427e78b166415d5a781e1673041c3229300b1283763fbb7fc5a675282b572d8c8970a491178e6651a943a6578dae2636493a089a826e17283b786e431943407e1c2a3e5e9c4ca3c3350223c095b823c41e64414c1b67c8052d89130bbb05279dad1f0355231c4b0fa84d330a9d7c650d8d1c31a405b821946a3c01c04374b583b2b461b3693e73902e342133446128a2984f65962dc40173aeb7c7767454132a3c804f9f334b7da758773b5f4962662b4faeba50a439bcb409627d6d0b1f88804472008981a5027d6b029647652d72460927a5005d0a46077f1b90934db4122c3fa265ba60332b9da48327794b066b574710ac7c8947929badac94c138a85eac82943f3564b029a018982168064b4c8e1f6e4c625f8e650a9c331d442b987db72f84c46b166d229d2019b51b19482c1b3d3832409a5215083ca770c5c78a51209d11789d7cc00aa238be1629754f089037b7b6a0864dad6642a5c121bcb4b59ba1b5c3377418678d408d19ae96bc92931ec36e754f9611a6a05b81539f2ca84f545676c43c44144724165d8225905f5852b4a4573d0662539aa50952048a81ac0930792711b5c4941b1c8d1d0f8346bcc0a84756744432a34b604bbc392921341e3d15028c3ba66974b3484a6f972f127fbb29091b0b0ca1892777564eaa808b375996141e11610f9f9d9f58830a879640a764745d433d784c892fc5115e5c86595c4086c0bc612a120e9da261b9a5996fa9594761c40b51182a215205302e57219a95955f48289c0c626784276143166f609853964d69867dac7179a574a39c7229a494620e85227d597d75351aae2f686f509747924c2ec83d9c4da5c62235620925aca209b1aa6e364f650c79ba9e61899321063d6fa74dc5256b4f39aba74667271f4819689e4a3db8478e855758361d4f2f2db872014d24bc498c8b87b38e2d0e445a2f39b6231763a184541107737c7c5391656f63492c23879cbfbab755805f7d516206a23d1e300634516e7934bd866794bb1b58b974940a4f5f1d638f40895b3f003d16b8b28d1bb97e5e07b71e57b6228d685c9c69564e56887c92bc4f02a9b4bfaa1f984a869a3a19a5800257224278716ea1319a2b2ca7ae5282c0381b7a9f0c5946c097b0a5874a1b3c92675d1e658c0eb788379867aa207e14ac197851247bc2927d7c211f53710161ad6d4e57c36b817cc10d5715349c6a65286031bd650e05a3b85d5f7aaa010953276d6582037d830f136e4b95920a1888187019c49366be1c12409b60322dae2a6f856b6cb33b48827d473d98755762692e32875711a8456d516205952f65552d";
    bytes constant setData = hex"d850b1304381ea51a9b171214380e5c14cb06c213a9143313c00af0088a18f912fe16630f9e110608bc1208113f155914b31573100b08561b120c011dab05321a2c106506b00e960f6f14a010a914d3119f066e0d99155e05c919e01d3918a2169e02af06490bf7175a10b7053c01891a1b0a8707a318d30d6a149f1b981648058909851bc2107c06a7181808c702841e500a3d00820d0a1f5d06e51a981b4f1ebd15c40dbf1ad314cb0e99018f0df503c51ac01a6d16e21d1d01520ffd1d9a17f71a420ecd07fa02fb0b2b047f1fde10fd12ae0ba61de21d42097003460d1b174212cc17e61b6d00101eef03e91e90183a08e117e2043c15cb1a211833051d02b50ccc009d037b1771074d1721103a0e6b101917de1038113d0f3907ab04fa113f1b44031e00a015ed14dc0a0603e20191111d0c26157f0bfd10760d6a02b21a250ec603571cc409890fba03c107d31b9700b500050c710bf804da04ee1c691e0701ea08c10a791ef807f31f1f0acc1ab610300f9b0b531eac158715ff18f1062d1be90a370ab8061f1f9d02ed0948075303f51b1a16b20e1308d21c1b1c6509f2092001611419134f167c1d11130601a206641bbc07ba15bf030a0db30f2219071d2907090db70ae9006c19ca17741727114814340aca1a4e19ab17e500641e940be116e006771ec718471fdd088c12ce096115690da91b420dfd171d0b2a008b098a0bc91caa08730ab30f6614e20be705b102d80d4a10710d92160408ca1dd215cd1e9b020f0e1e19290a30088514090af40b911fb9152a0e2f079a07871c720b580fb81320021d01021d40196f044c051000001803008603fa0ccb0ca90566121a0dc302130cb51d900326141b13e01ff4004c1a8f0e7e0b9416841cde01671e541b3612c71688136a14921dc1149a13b81eee0d3a0b9813e70d6611060d9a12400ed41689055e0c3a1b5612860c4a17640701166107171e5b056a0d0613da000c150f0b02181b1926073d0385054111760ddb105f1a051c35040413c40dc31d5c06820c4c00251f731cf30cf71e491ad31cee0bfa06fe05ad153215b203291fdc09bf1ac706731bdf12d20364028809260e3d120d10a9116b171c1b5c1ca41a640f3a18950e32155804751fa61d031d2819d41b5d13a41f23091e03a70aa20b94102c0671042809ae1d9c1a851cdb0846158d15af16cd1821113716250f5b131610a90e77114c007c0f271dd014b01a2410740c79181c06600dc816d607470dc50f02071a19f8179e0c0606f018fb0ca5094b1c6d1f7e0a350d870d9b107d13570eee12dd10f60ea8137004801b7611b2143f0ad811db1d8210b90687152d09e809cc1f241cb4030408cc17c00e1217110f2f1d2e1791169304ab108011180f8011c111ed16cf1a5d1eae097c048f06c019fc1ee41fe50b3a148b097c04571d3e0be115b714dd1e830f0b156e1fe40ac1088003b600de1a5b1e7c11b11ae60458092f0b3a1b690ae517180e981ca0024b02500d2b0c8706701cb81896114e012f157f192e17f81ca216fc0f1201561f79027100451caa1bfc075016ed0a801c261d4a06790c6f10b1049c0ffa1362139a1ec6164d157509191fa60a1f0e9e0a9606780c93193707ee0fd8187c1a740e5a12ff1cce18b8057d0e9c0eff17201ddf1bb400c40d831327063019a911891409113006fd03a309ac094e07f61ae7008300100c5607d4029a1ad518cb1f99190e1ce50f610cde12af0d07087b1a52043d0950003502d11b0207b614381b9111950f87053203840ed210450fa407bb1dcc030e16bc16db041c1812119b0efb0cf70b8909bb0b6606dd00bd0ac70f540e55171510a4051e12241e3507261c9c025901d01b1702a615e51baf0ef70af70cbb0bb4182413f9110d03971ecc036f0e3e032e1105075f1ffc01af1b1c15301f9303ab11aa04cb0eba0920123316b31a0c0fec1cdc05d110f5074016e60cfb1dc211b6122814eb1a011f0300550abe153e0f3310ec1ab213840d8109c907d908e31e4418691e4a0d4504ab101b19551d93024304a91bdd039d0e581f1e11b418cd0cd7044c0e4d1b4804af06591e311d620fd11f7819910fb9085215091f621380004c04180f1504810eef19bf1c9d17da120506ea111e13ce1bfc175304d1052b01be173b0a0a07d31f270a7f15bf1c3318ab0d9c1ac7044c1cd108b21cda11ed0bef133618260d5a0b3e17ef1b9d18740dc91956159f07ed17301f2f1ee81fde15600a341c77097302b90f5004be0d1911780070191b19501e6b086813c90fba06bd08651a701b091f1910b518f201051c0d01881ee909e90798067c1af000021b561f3519160a1104e30b8e1e6b043d0ab61cd718e4000c09321ffb00c5015d16c9178d1e0306321f491947002006c91c4e078b00191a901e05047605d8047419be0ad209841585021e0fbb1e731ffb00b9099c115b0714190718a5078302cd00220eab106d0eac000f0d5507eb0ccc1a9c1c610bc917b103480a6a07af10061db90b320fa80191019e1d0e0d3310560a451c980ee41ce911281c6d1c750f6f005e01781460050105d317be06331079157f04671d7a13f1124413961d4b0441191700601b2c1a840ce906a21ba60940048c14221cfc11b402b911a30d161554167d121d12df0f6c029007e307220c3701e00dfa1152198a14f2104d10f518c61b8d0b9819de14b003fc13c305c21546084c061e18fb160112d61dc3117c134d04420be2023c04c103ce08b209f507b218161074198915400d00029314c10a0f1e43113b1f7e1b290e6413ce1a6e17f71cb400e4103012d50e4d066c01a01867034d0836113712ca0b4714e41299009d050a0c2113671a27037709ac112209a81b5e1f4b0ab815bc00c903e319eb0d2c1d430de01d8c08080349093d1a591006092512f002eb02dc12cf1152145704070b5c1b3b15201c6614a31b890d7b163b12021c501e0213b917c11eaf0712066f156e07661f18183c151c10ec00ba078d17620c9308f40b2a1ba10a2a14bb1111197d0e7d08110e631dfb1f791aef1f680a7815e11f21151f01dd0972189c17e31efd01960679114615d717c61511023300b500f00bbb03c70c27013316c9042113c501671b0a066d1a3900440c4908f30d921bc701351d0f086e08b51280042b18cc0d310472041d1aee0cb21eda15b21a0416d319ee1a481a3212091c200d7e00ad1cc604bb194c116c16eb03e2120d00430ccc0a8a085b05480dd71f380b441352131f1ebe1c891a8c1cf80c220e4110e10ac715360be500b7032e1d6907c8124c0f8a19941a3b15dc0f870b3406fc07c6164d09eb13c20d1818a11ca6031403ec155b00a0135f024b06e1045c1a730b4f0fed082a01d71531124306dd0eae1306166805f6063c187a008d174604d51f141c67011001ff00ff193106020fc60b24160418c9046e01ba0af11bb01ec915141ae916981183098411c619791e5e02b1184b13bd045a050f1b0805c014651bc60bed08670a990d19192219e90a891f6804460ff6017505ea0e5a068500c402b61177149f06d00d250ecc1a6019a909b6099f1dee02c8192b00da04d80d4b1f3a0aee0b4d1c721b4f062806c50f0d04c60b92000812b5087c08b202540bb302d302a714cf0337097a155f01ad06e60f900cdf17d906a012fd144f1bb001b815d8008215ad03160980173004f20a0104ab04500edc165913c611a9106e09600e3e1aed073f1da7084a013416230372067302031ff901ed01e311e7023605c10903173910ec067e1d9419ad0f280e1e04db0b550ef7118b076700dc04d3150509201efc1b040764142a00ec115602e81db8172a00371ef50dc21bfa13931a5808250dd3136b1360157c1cfb16aa17421a4801bd0e5c17b901c70ba50f2b1f9a16010a63164305ba12280ca006f80086125e0f8114fb00f91ebd09ad02f51edb082318a5043705b51e21119a11f2100e068f1b5a16311f5513d71f9c052c15e410ee0ff00f69182c05ab0f88182a1c160d6407171c850aa815b810191388033e135e1b1b033510660d540f8f1260037a1f7a0f5517ef09090d6d0523112506601587145a152607ce066e06ac19791f9b1b1e1e95011b1dc20a9f17541762195f03021d4302e316201fd20795019f086707381c9906c5169017e4097605dc1ea30d3a0b5702651703112b164a0d8017130aaf1c1c18dc11d01a140ad1004b118a1aae199001dc0fde01f4044f036a0f250dfe170511141e271c9615f0023f1c2b159e16d7112e03f90ac00b031a331fd71d621b9b0619129d06d90bfd01291d1e0e0413a812541e3d1262070c12e605de00050c4c1c16038f037008bc0dcb0e46002611691b3601ca0c8d1802159510121f851ab117ee08221d7a012e0dfb02f8106c17e71c10014209d6171f0bbc045b0e13182603aa0d1a0c880a5f0bfe1e911d7414580e87046e16a70eb30e131e200e7516810e600c100e2208101bc31e7f01b21881101512af1bab0747032c0e0c15390f87070b1c8013d315d612da145216ed1bcf043e07f919db1e3d0766175d1a1905f706e10c231833024a08e40ea60c8a09d11f731c8a070c07b50a0d027016d9114412e712c700c20e0c1950111b0edf11a40d361bcb1ee70acd097d0bc409b01ec911fb1d9206b515771c9b09a316880ae81f041f240b731be51462036112ff00ef11e70492012e0eb0014112a201991a3615f006fd053818f91fec0f0b0ae10d1a148613421d6119b40f1f05d815c90c8a0c68002a16a010a211f71d0218c70d6e04a707ee0939092b01720c100b5702a6118e176d0bf91cb71aa30d07191c10ab1ceb1cfa1e340e0110e9038c12f1197a1ec901f1083a13b90d9408fb0bfb0991121002f101ba1c261f330b0f19aa136b025105c8190b1f5309011b641a5906e21e4e1dd606ea03de097b0157151c0b400bf215ad1fb800fd129707d81e5605171763112d1f4100cf0d39170c194704ec102106a60b411e4e0f2f1e6e119d1ed6101317a818bc09d41b181e171947190f02e21e68045104a60d461f62144d15ef1d701c6a15ab0c620e5c1e9603f80e6c151c134a1b5d092302751693106615c40fa0012614bc1da203fe112f00da0ac802a31a221d6308991e9015900bc011fa07c81f8d07eb115f152a0c31074d1f3b0b41184004e10aaf0ef3025017be13a0065f00ac0d7c138507b10ed4152c01bc0f030d9c107417310b4a0c760530186a18a90fe70ce207981ae70389066b105b00430c0a0ae01d8917d115ba0fca15f011031c1902c40bd01e820ea30b620ecb18e203aa00630de604ed009906e717200fb418bf14e115791e4a107601841e090b28050d1d3e1a9714f803a4174c098f12e31b66155f02640e36017b11ad177409310cd21fac01b604de17041fe702cc19f110b9110014a0008e0334084e0caf021e1eb7129b05f616f508e5079b090005710ba70090134902840efb0a9606a006aa0d27154e16df0abf05e80cc40f2012ef188a0d0b16b508da15d4171009b700681da408721cf4013804680b0c13c90c9809ce1b77137e1cea05f902620917149718221296049c033a1ece02bf07d5196f18a20d2502c70d7c19691b3c0faa1d581658159e0ff1199c06560b9e182d12530aa80c5d102600aa1cdb1ce70be6124108a508191355001e05e20c25092b14f0025005ef1b0512ae045a058f082810e3014e18401bdc0f8e180a17ec0220004d1116130516fc065209750b8c16a113fb1eab1ae3080e15810f311a5915df1d9210dd0a13085609470c91011b0df21ce208321bc7157d1b760c6300790f7610e51b5f12c402341c5008af09220093098307af02a3179906540415155b1f3e1dc106cb1a771b9309f10bbb1791073c1a1616b1140d06ec13e410290bef17381ffc119402231c480346136e0c9011c4118c04d11e6111000fec19b30f35078c037a0e4e060817f003711dd21e65056d1a1f06351ed3006b1ef900410f9c14810dd40cb01e550fb41e8d07e91bd7180008a60d020a1104ed1bc81e040a2f0c0f1c9d13af18460b640e40144b0cc00b3005610dd01f4d05eb19780e8a039c1f1c13bb05581b8c0011034a0f1c096d06e706111502085c021212e81fde188d13a117641e6e06061fa11eaf0b821d131642122b14df1698000a08df14f00254111a14940c3005eb18411cd117791ed50ab304fa00a0155203730bd7101a1cf61bf41e4e0a3314550e910b001d4d19131be3101f0474151111281334117a01a10e850ceb1c041e0f1a8918d4057816de15191c5c0a7e01b501fb14f100e21fe200451d8004830cb51415130a1f65084a092f154e198a1cf71718062e0db6138e1e1204d00a00070504fc048e1c9005491b7c0550078d12a20a5619ea1c840bb61a5d189a0dfb1f500a7f1ffa0df11ff50a151ab10203078604d302b40a0a119003d11558029a00fd194c041a027c13c11e9010bf10860bac05500535161d111e0c5d09e612f1088b06e10ca80c770f1d1d370bd90229119e126b1e341c950d6c01c90f6718b11c320bf806811f8105d90e70036916b20c4b1a3f11e40f201d6b1823081214750a2a0bb70d6515ef14021da708cd0ff21fb500ad00ab0e2211221f7d097d137116ea04650ac9082e1b34079105ed14210c291efa1e2119d703e11fdf15f20c5f13af1a060f70190b0ed508b5055e069d1246134b1ab70c19157b1830031807411ecf11401d9512731fa8017a1c821bdd0b240938012e18670501002b04e30b4f089a01da0ef715161ff302cf0b8b10990e2d1c06129a116d0ad2132e072d0ca409181fb805e706571f3c1479154c1d331b10160a03610a9b1ad10d1e005a1e05091c155207340f470fd404bf1ee41b0d11601aaf08c81e831aa51e9f0a8d00601e521ab8075d15980ae41a501c0c0942012817de166a1dbd0daa1430074c0c2300b81ca51cfe1b1d0b231606173215480a05095d19c0163a057a0ffa015812c91f3b1e980f8a043a098518ef044a1e86087316291fb00f300d200b8c011d11f1173f1da611110a85047c13e800470f2a1472039a0964149415b4177d0a221a84165f196c021613301f76123319b7159e045210551fbd15e414fe1e7c1afa05ab0c1701de13421278142f0ebf1ac601fa10f40a910d8b0cb61d9f11d8199a00c30e2a06471c6d062d002606621d8a19b70d45128c18951735189115ec139c02701e62115e0c88111d0f8309361a1808fd02b5039815bb1c620f581200189507bc049c026712691ed511ac1a091f6918db0ac905340b8e1ede19050a5001491b2c088e10a9149000330eae13ac0f520e0c03b512f8007314260b83151214a617af1249144115b0128501021bcd17071f34129e037d1956032e1b110f2e13fd1b4411cd0b0802e21d4b16dc11571cf5010e18d20a181c42053400e809dc021804b403a716901dbf1e8008a81c9819a314590b1a13201008152802bc0bfe0dfa047214dc1c5d06cd1c371a3b0fcb114317930b301a2d18950e7008360be316ef1ceb18f604de1a66175f0ceb027c0d2517061417175012f1130307ab110b0e5b05421a9e1bf70b7e10a911671bed0f5b0f2f1db31627119508e6128c13e31e3615521fff190315131f5507e80fbb08970fb2130a029b03fa184f1403034803f709a70a5014451bed15961b5105621c501342131a1b43062c072219bd0e0a01d8089d12bb1b8e161209d9182510c0069d1a9f0d62053803e81b43128a172a0c9e184c190205f70ebe12ce17300e2f06951315180f15240abb18290a0805b50ace0ed208d71da50572013517c0013d1f9f037809e60a9903af022300bf0c2305a11bdf1f260428064f0705079f0d4e1cc7119f023519f80ade0d1d00611c4a1af504d80d6818180e011d580b3f170919db10fd0ff906e41e680b3e0ccb1c290d5e03b6001d180d088609fc16920f3f19f411790d02169e1e340e7806130c201ff11e011cfc16f21bdd02dd17301c0119e31c210f4919100b5805cb187309e90582147a167d1ab604ed1d310a060bd315f1138805970cd407e21e1e1f01013e1f8b11f30c9c15b21f6b06d209a90f8700c61b6f07f316d915dc14d2095d0d8d1cdf1b5b041a0d770de3154910761607166205570e6408980fb5048a17fd005f146c19ec190904100c00183814921ae4093a0e221ec905a30b62131f0e7719ee0b9602111fb806ac0f5306cd14d811110c8c1823179e02a71fa40f3003dc181506d7095f020906710e66048b1f9201db18f61c541ee516e1097c1d130fb906a21f52016001be1c531fe41df100ff13740ae305261aa403c816f21e08197a051107d7056c17cb17ee0ce00f4b15b1117b192a02c00e110ed30cb10ca31eaf1464139a00dc01910d841bf90d5718261aa905c5126d119614b5173803370fa006e40d1a1b0d117304b90be51dd40ac6134d147d15b719f514ea18ea07350ca3072912fe071f19b617600f2707c4101b0ad30c8a1c93163914a411b8159c00b2033618691bb81b7907eb01211e501bc8132a0bdf115306ec07660ad405a10fa7158e15d91de40bd41d0300981d12093100ba0f631542154e194d033512e01eb21d8300b400f3016a0db50b0b01450bf8126a065002701fda0bab0da11f9400b316f81024088310b107c702ca16e908d90ffa149c0a000cd200ae0f4a1165178a19361c7e1fc0052d071119eb1abd0dec0e881ece06300ac71f201e270678172a0a6a1a951b5f0c7a1b7205811210176c08690add116411eb022500ae07cb0976047203761e5e0e450c990c34116616ed190518af11df0a2f1d3b17910cfa152c1040005f1a2e0256186e1d6d0e671a0f09d11d7513af0a4d13a8038115fa113513af0e261a720b4d078409a313da117b03a81c0312740800055c0dc20a6e10da1c6e07b015c21fc517f516d009c3197a1e260b4d125e1f4f122a058200590937118b1022129f1af509801a2d0d94151f1bdf1852146a0d0e1586073f126604c81a7513fe1f031b120b6d06f514dc04fa14f9086d0dd513570a631b0a188210e016f40a290099146b16cd044c0794161c00a6199101e2169808c611b712f40172125f1d50095c0061173d11e605bd063314f50e4d1679085f09461f101c6d0a1f143f17911c2a18fb0956081110f31121063a115018041c3a06601c6808431d6e04fb19f9088202ba0c2616d21ec91abc1b5f07c90b821be017421948132c02fe092c07ce18130c32142119d3039511bf02d90f7808c204bc09cb19ba161a137216ce009f0c4b1c5b16e20b53020a064e1cf3086b0c0d13f31f1017e10b5d16c21de202831a411d8b0ab6101c13990a89160916b117bb1d6207761c2b08101a8711bd13d319e415c419181e4002e5016504c203fb060b1998165d1a4418f10ca9085c01340229038708940c0b0f15075018b1167309910f660bd80cfb0fd6010100150cb80e5509e31376042a0035177c111001c0098814d50626077d0ded0599168d081711f119ec123d100904b71407171b12ca18da04db195703fe1dd21aab08ba0807055505100d3c1757067916fa0af514de0b03081c072812d115431d611ac2192705851a0e1b4302b81ad61e1e013f108918310122061f0d9815e41ab609ef15e900d41d1d005917e7033d1624109f1dd0100c1cd81011195218df128316830f1b17651ca91d22134c03a11f6809b415a715511a460bec0049012001d815001ac00dbe138b0cac1a3a01990ff31fb81dcd0c7c16df10ff0bbe1f0212fc126a0b10158918061a9c0f2600a41ab905ad04b90a1b14130629008c131d0da3017306830a760c2702c40dfb0f9c1cd01c0d151e0ea00cc40dc108be1b2511b70e1900010d530578192d1e770c7a065709c9059e0374011900261cf3065616a61de50771105016b30a191172148e1224151210b31909075f17950dc61acd086210ce0cef19dd1c9c042c0f4f1cf404f30ad515490e330af4079c1a1011330f2f1a97041708220be61575133006850acb182704a8126a06a31104077d18cf13dc17770f24144a0b6d1a950dbf161d17420ce40b10120d08f31b530fd9041b0efe1ca70c4305c413f11d450cc601921383121e181e0e7e02c005561e47036e0f010cb81e6011a11730139e0f7411ae1f45089c042d13e20a0c0a9316c7163b0776121c0e3e1c11016b0f4c12611dda0275102a1f9f19d91a970a27106e035b1f170025027a0d4006ca16f30b2611a2150b07340b2404b91014080d0bc203791a1919700ce50f8f0adf1c7b04ce14f10a741c081c270af600aa09d408c8196802460df50df5183e049b1835072c1ac703bd00050b8b0a1d0d9e1e65052e0d831e231afa1905185f07c71df01eca07250e0101621f9d128a11211180110414420c5900a114d30e4e020c14e6027e02c21a1e05a1104f1bb005f31b050cc10d0901eb154810b901af102e042500d217020b0613e510ff1946034a0929038404d112c11c1c0ddd15b712d4019316661d1403e91b2418461523193c019c1a4f138a05911af70f781a600be7033b1a6b00b51d2f11d3191c061708020af401940a051531071d07f8185e06ac0a69002118ef069c0d5d0eed0f5e17ef18111a6713c11bb6002213311895130d178e17601c111fbc17ac00370f5203e9184f0cb91fdd1d72121a19f700c310b2099703ca1ee313d1187701f718a70dc10bd11c7a14f8122216f21a3b1fa2122a02f017241b1a0d9c012a098c0daf0a860cd315390165088c04b509750809026f1f470eb70e6d0a180f5f069913bc0f5003b801df0e2f0786056a04941d080d4a059e161716bb15ce108515cd0ad9053008c00ca116fe066e0fa014431c280e0515800ef70d1915df1ab50b0c1eaa16db00df1486137101ee10da0246098912170d811823085f0c37111316a81013079704b50f970576163e0502157b09370eb10cc30e49142f1bef17f10dbc039600f40ce3175e0f3d0a28063d05ff1e2513b107db1b331b8f177e00d0112e0a721e541a80115e19b415341fba0c140eab1d1c0f1900140ecb13e20a891c5402af15df15c81adb07ae18370cf9107608261c6b032e00b4188604370cee004007060d2d1777118f11931b221754184705e41eb11c700d6100b312f409b0139f05dc0dc412f9084b053b1d1404ae03d201c708d81d1009fe112214e70f7e148b148b18e61d961a72004a0ef70052001016ed06580280069d0dad07580be319540e1c0f8b16090e6c06b01af705620cbe171301151135187f1c591fe50c9d014215550c0d15b50bfb02ca0e9204ea12d60dda07da12010e3e156b0f5210b3128a0b13144d01a314361f8e033911620cd10d1c07491ee11902105d07ec06d006e41ab30ba01ffd1da6109b05c911e91ae80ad90da1048716330cbd0adf1679136b13d80a531d1e15970390115809e5090b10cc02f600430de5199c0fba00da0545187e1d9104331fd60ea3083203e41b820b14096913c1035206d014f4115508d91c4904a80baa159204d81bf507870f0e180e075b01c7094112a305c719130c5c004a0d760a2b1d72157809111c281f650d9f130706281f761f44067b17ba014109a7127a119b13191a5c058317cc1be306c31166031d00ae0cb41775075614ce1a6201030a7d0a06164a1b6600cf0f660d101cde0a5c01bd064319561e2e1fca167610ed01380638107918f700871c330314173d151303e70a1602d504111fa509f903530e1f14680c0b1f4f0ff311711d7807ee0f9913300daa00121348178b176c141618c5114a1dad05e505f2036200030fad18c91f6b02220b20140515681c661abb09b409fa01b107b30a461a1408b60585098a1cce03dd12fa0666162f1a2103c7034e199604c5043a1050156b138301d412d60ec21e9b1cf41f23073e01681af913ea059d1d0019101439067401120730139308e3064a187e02b718150aa0013f1c4614d71949165d167b03a01c6107551b86195a1e631958116619f919a902b51bb50f63065e115d01ab02af0c9a11b71d130e8207e014ac1768167611fb03a21cb608f70d89174a04e31918037e129f0179173612781dca07781aa8001d0f8115041fa90afa16550d541c7b10ae005818891fe502f7127b18d0187204ec11a610b418cc0c991e5805811f991c57098b16cf03be077f0be504e40f5a0842137f1ffd140f023c15a30f7d19291a13181c02be189c0afe179806e60a97108502e9002f12ae0d3418f91d260a1e0a11113915e01a76013c0fbd00d01e0910441a1a1850033f00260cbf1891002204df17f51a550ada0b3c1b0c11d0052e1d020789070800fd1eea16bd1b321dcf003f1a2009a80e2b1c981f0512ec089518b118ad043a15621bb30e851814125104a308a71cd7096d1fb61c9c059f1de809280eb61e1008061a040187190d120d1dcf0e5403080986084506ff199e00c60bf5052f0f1e042213270d5115b50";
    
    function getTeamChemistry(uint24[] calldata tokenIds) external pure returns (uint256) {
        uint256 teamSetData = 0;
        uint256 teamChemistry = 0;
        for (uint256 i; i < tokenIds.length; i++) {
            teamSetData |= getTokenSetData(tokenIds[i]);
        }
        uint64 short = uint64(teamSetData);

        uint64 set = (short << 4) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 8) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 12) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 16) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 20) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 24) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 28) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 32) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 36) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 40) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 44) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 48) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 52) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 56) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}
        set = (short << 60) >> 60;
        if (set > 11){teamChemistry += 3; if (set > 13){teamChemistry+=5; if (set == 15){teamChemistry+=2;}}}

        return teamChemistry;
    }

    //function test(uint256 tokenId) public view returns (uint256, uint256, uint256, uint256){
    function getTokenSetData(uint256 tokenId) public pure returns (uint256){
        uint256 index = (tokenId-1) * 2;
        bytes1 part1Byte = setData[index];
        bytes1 part2Byte = setData[index+1];

        uint8 part1Int = uint8(part1Byte);
        uint8 part2Int = uint8(part2Byte);

        uint8 torso = part1Int >> 0x4;
        uint8 leg = (part1Int << 0x4) >> 0x4;
        uint8 weapon = part2Int >> 0x4;
        uint8 enchanted = (part2Int << 0x4) >> 0x4;

        uint256 tokenSetData = 0;
        unchecked{
            tokenSetData = (0x8000000000000000 >> (torso*4)) | (0x8000000000000000 >> (leg*4 +1 ) | (0x8000000000000000 >> (weapon*4)+2));
            if (enchanted>0){
                tokenSetData = tokenSetData | (0x8000000000000000 >> (weapon*4+3));
            }
        }
        return tokenSetData;
    }
    
    function getChampionCP(uint256 tokenId) external pure returns (uint256) {
        require(tokenId <= 4444 && tokenId > 0, "Invalid tokenId");
        bytes1 chunk = cpData[tokenId-1];
        uint8 chunkUint8 = uint8(chunk);
        return 100 + uint256(chunkUint8);
    }
}

// SPDX-License-Identifier: MIT
// OpenZeppelin Contracts (last updated v4.5.0) (utils/math/Math.sol)

pragma solidity ^0.8.0;

/**
 * @dev Standard math utilities missing in the Solidity language.
 */
library Math {
    /**
     * @dev Returns the largest of two numbers.
     */
    function max(uint256 a, uint256 b) internal pure returns (uint256) {
        return a >= b ? a : b;
    }

    /**
     * @dev Returns the smallest of two numbers.
     */
    function min(uint256 a, uint256 b) internal pure returns (uint256) {
        return a < b ? a : b;
    }

    /**
     * @dev Returns the average of two numbers. The result is rounded towards
     * zero.
     */
    function average(uint256 a, uint256 b) internal pure returns (uint256) {
        // (a + b) / 2 can overflow.
        return (a & b) + (a ^ b) / 2;
    }

    /**
     * @dev Returns the ceiling of the division of two numbers.
     *
     * This differs from standard division with `/` in that it rounds up instead
     * of rounding down.
     */
    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {
        // (a + b - 1) / b can overflow on addition, so we distribute.
        return a / b + (a % b == 0 ? 0 : 1);
    }
}