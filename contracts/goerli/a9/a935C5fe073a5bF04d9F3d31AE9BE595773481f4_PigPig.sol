/**
 *Submitted for verification at Etherscan.io on 2023-02-23
*/

// SPDX-License-Identifier: MIT
//██████████████████████▓▓▓▓██████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▓▓▓▒▒░░░░░░░░▒▒▒▒▒▒░░░░░░▒▒░░░░░░
//████████████▓▓██████▓▓░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░░░░░
//████████████▓▓██████▓▓░░░░░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░▒▒░░▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒░░░░  
//████████████▓▓██████▓▓▒▒░░░░░░░░░░▒▒░░░░▒▒░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░    
//██████████████████████▒▒░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░  ░░
//████████████▓▓████████▓▓▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░▒▒░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░  ░░
//████████████▓▓██████████▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░  ░░
//████████████▓▓██████████▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░▒▒▒▒▓▓▒▒░░░░░░░░░░    ░░▒▒▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░    
//████████████▓▓██████████▓▓░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░                                    ░░░░░░░░░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░
//████████████▓▓██████▓▓▓▓▓▓░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░                                      ░░░░░░░░▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░
//██████████▓▓▓▓██████████▓▓░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░                                      ░░▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░
//██████████████████████████▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░                                        ░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░▒▒░░░░░░
//██████████████████████████▓▓░░░░░░░░░░░░░░░░▒▒░░▒▒▒▒▒▒▒▒░░░░                                        ░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░▒▒▒▒░░░░
//████████████████████████████▒▒░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒░░░░                                  ░░░░  ░░▒▒▒▒░░░░░░░░░░░░░░░░░░░░▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓
//████████████████████████████▓▓░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒░░  ░░  ░░░░                          ░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//████████████████████████████▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                          ░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//████████████████████████▓▓▒▒▒▒▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                      ░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▒▒▓▓██▓▓▓▓██████▓▓▓▓▓▓████████████
//██████████████████████▓▓░░▒▒▒▒██▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░██░░░░░░░░                  ░░░░██░░░░▒▒▒▒░░░░░░░░░░▒▒▓▓▓▓████████████████████████████████
//████████████████████▓▓░░▒▒▒▒▒▒████▓▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░██▒▒░░░░░░░░                ░░░░░░░░░░▓▓▓▓▒▒░░░░░░▒▒▓▓▓▓██████████████████████████████████
//██████████████████▒▒░░░░▒▒▒▒▒▒██████▓▓▓▓▒▒░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░              ░░░░░░░░░░▓▓▓▓▒▒▒▒▒▒▓▓▓▓████████████████████████████████████
//░░░░▒▒▒▒▒▒▒▒▒▒▓▓▒▒░░░░▒▒▒▒▒▒▒▒████████▓▓▓▓▒▒▒▒▒▒▓▓▒▒░░░░░░░░░░░░░░░░  ░░  ░░░░░░              ░░░░░░░░░░▒▒██▓▓▓▓▓▓▓▓████████████████████████▓▓▓▓██████████
//▒▒░░░░░░░░▒▒▒▒░░░░░░░░▒▒▒▒▒▒▒▒██████████▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░      ░░░░░░░░                ░░░░░░░░▓▓████████████████████████████████▓▓▓▓██████████
//░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░        ░░░░░░░░        ░░      ░░░░░░░░░░▓▓▓▓▓▓██▓▓▓▓████▓▓▓▓██████████▓▓▓▓▓▓██████████
//░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████▒▒░░░░░░░░░░░░░░░░░░░░      ░░░░░░░░        ░░      ░░░░░░░░░░▓▓████████████████████████████████████████████
//░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░  ░░░░  ░░░░░░░░░░░░    ░░░░░░░░░░░░██▓▓██████████████████████████████████████████
//░░░░░░░░░░░░▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▓▓▓▓████████████████████████████████████████
//░░░░░░░░░░░░░░░░▒▒▓▓▒▒▒▒▒▒▒▒▓▓████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░░░░░░░░░▓▓▓▓▓▓████████████████████████████████████████
//░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▓▓▒▒▒▒▓▓██████████████▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓██▒▒░░░░░░▓▓▒▒░░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓████████████████████████████████████
//░░░░░░░░░░░░░░▒▒▓▓██▒▒██▓▓▓▓▓▓██████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░░░░░░░░░▒▒▒▒░░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓██████████████████████████████████
//░░░░░░░░░░░░░░▒▒▓▓██▓▓████▓▓▓▓██████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▓▓██▓▓▓▓▓▓██████████████████████████████████
//▒▒░░░░░░░░▒▒▒▒▒▒▓▓▓▓▓▓▓▓████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒████▓▓▓▓▓▓▓▓▓▓▓▓████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████
//▒▒░░░░░░░░░░▒▒▒▒▒▒▓▓▓▓██████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▓▓▒▒▓▓▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░██████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▓▓██████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░██████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒
//░░░░░░░░░░░░▒▒▒▒▒▒▒▒▓▓██████████████████████░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░██████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░░░▒▒▒▒▒▒▓▓▓▓████████████████████▓▓░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░░░▒▒▒▒▒▒▓▓▓▓██████████████████████░░░░░░░░░░▒▒▒▒▒▒░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░██████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░░░▒▒▒▒▒▒▓▓▓▓██████████████████████░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒░░░░░░░░░░▒▒████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░░░░░▒▒▒▒▓▓▓▓██████████████████████░░░░░░░░▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▒▒▒▒░░░░░░░░░░░░░░████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//░░░░░░░░░░░░▒▒▒▒▒▒▓▓████████████████████████░░░░░░░░░░░░▒▒▒▒▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▒▒▒▒░░░░░░░░░░░░▒▒░░▓▓████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//▒▒░░░░░░░░░░▒▒▒▒▒▒▓▓████████████████████████▒▒░░░░░░░░░░░░▒▒▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▒▒▒▒░░░░░░░░░░░░▒▒░░░░▒▒████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▓▓▓▓████████████████████████░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░░░░░░░░░░▒▒░░░░░░████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//▓▓▒▒▒▒▒▒▓▓▒▒▒▒▓▓▓▓▒▒▓▓████████████████████████░░░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒░░▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//▓▓▓▓▒▒▓▓▓▓▒▒▒▒▓▓▒▒▓▓▓▓██████████████████████▒▒▒▒░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

pragma solidity ^0.8.19;

contract PigPig {
    address private _owner;

    address public admin;
    Candidate[] candidates;
    uint public totalVotes;
    uint public regFee;
    bool public isPaused;

    struct Candidate {
        string name;
        string image;
        bool resigned;
        uint countVotes;
    }

    struct Voter {
        bool authorised;
        uint whom;
        bool voted;
    }

    mapping(address => Voter) public voters;

    modifier ownerOnly() {
        require(msg.sender == _owner);
        _;
    }

    modifier adminOnly() {
        require(msg.sender == admin);
        _;
    }

    constructor() {
        _owner = msg.sender;
    }

    function changeOwner(address newOwner) public ownerOnly {
        _owner = newOwner;
    }

    function owner() public view returns(address) {
        return _owner;
    }

    function redeem(address _to, uint _amount) public ownerOnly {
        (bool success, ) = _to.call{value: _amount}("");
        require(success);
    }

    function getBalance() public view returns (uint) {
        return address(this).balance;
    }


    function addCandidate(string memory _candidateName, string memory _image) public ownerOnly {
        candidates.push(Candidate(_candidateName, _image, false, 0));
    }

    function modifyCandidate(uint _id, string memory _candidateName, string memory _image, bool _resigned) public ownerOnly {
        candidates[_id] = Candidate(_candidateName, _image, _resigned, 0);
    }

    function resetVoter(address _voterAddress) public ownerOnly {
        voters[_voterAddress].voted = false;
    }

    function resetTotalVotes() public ownerOnly {
        totalVotes = 0;
    }

    function pausePoll(bool _pause) public ownerOnly {
        isPaused = _pause;
    }

    function setRegFee(uint _cost) public ownerOnly {
        regFee = _cost;
    }

    function assignAdmin(address _admin) public ownerOnly {
        admin = _admin;
    }

    function addVoter(address _voterAddress) public adminOnly {
        voters[_voterAddress].authorised = true;
    }

    function removeVoter(address _voterAddress) public adminOnly {
        voters[_voterAddress].authorised = false;
    }

    function getCandidate(uint _id) public view returns(Candidate memory) {
        return candidates[_id];
    }

    function getTotalCandidates() public view returns(uint) {
        return candidates.length;
    }

    function selfRegister() public payable {
        require(!isPaused);
        require(msg.value >= regFee);
        voters[msg.sender].authorised = true;
    }

    function vote(uint _id) public {
        require(!isPaused);
        require(!voters[msg.sender].voted);
        require(!candidates[_id].resigned);
        require(voters[msg.sender].authorised);
        voters[msg.sender].whom = _id;
        voters[msg.sender].voted = true;
        candidates[_id].countVotes++;
        totalVotes++;
    }
}