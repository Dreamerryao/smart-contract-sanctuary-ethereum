/*
                                      LWKKKKKKKWKKEGGDEEGGDfLEEKDLDKEEKDEGGEKKEDKG:                 
                                     i##W######EEKKW######LEKLLD#fGKKK#EEEKDGE#WK#K.                
                                     E#####WWEDK###########K#KfGDGf#EEKEKDLDDKK###KD:               
                                    jW#####EDW#########W######K#fLLW#LGLDG#DGGDKWW#Kt               
                                 .####K###DG######KEKW###KKKKE##LtDEKffLD##KDEGEKKW#Wj              
                                ,#;DG####DK####DDLGGGGED###GEDD#WtDDDLftD###KLLGGKDDEWG             
                                G.,KK###EK###KtiLKKW##KKDD##GDD##tDKL#;D#K#EGffLKK#####f            
                               ;f; E###KW###DfLK#########KLDKLE##DG#f#tD###Kf;G#########            
                               ;D  K##KE###DLjD######W#W##KfLEtK##E#DDGWE##EtE#KE#######t           
                               ;L :W#WK##KDKLKK#######KW##EDDfDt##K#DEE#K##Df#DK#########           
                                ffDKDK##WfKLKW############KffEftL#K#KKK#E##G#Gf#EK#######;          
                                 D###KKKDKEKW###############fjDGtD##K#W#DK#K#t#DEK#W###W#D          
                               G######WW############KK#####KEffGjGW#KK#EGW##KK#LLW####W###          
                              t#########################KWWGfKEDKfK##K#Gj#W####GfLK####W#K          
                              i#L#######################WLtftjK#WDfE#K#KtfEW##KfjLDKK##WDD          
                              tE;######################W#DfLEDGEWWKDG#EKG;DK#W###KE#######:         
                               Lf#K###################WKDDWKWKEGfLGGGGEDDtfD##EEKEDW##WW##          
                              :#########################DtGLfLi;ii;;itGLGtjGW#KLt;fK#####E          
                             ;W############W###########EjGtii,:,: .::,iGGtitGW#WKWDGK#K##t          
                             :E####WW#################KGLi,,:,:   ..:,iiLi:;iGKDiL##KW###           
                              L##W############W######KGfti;,:.     ...:,;,::,ifEKDGW#E###           
                             f####WW#######KWW#WW##EKGjti,::.       ..:,,:::::,LW#EGDf##L           
                             ##EW#KWKW###WK##KEEDLGGj;,::...       . ..::...::,;G#DDEEW#;           
                             ##ijfDEW###EE##f,,,,,;i,:::....         .......::,,tKELWW##i           
                           j#####DGGGD#EK#Wt:::,,,,::::......      .........:::,tGELK###;           
                          D#E#DG######WW#G,.::::,:...........  .     ........:::tDDfE###.           
                        :#Ei##EKt:jDtEWD,.:::::,,;i;,.    ..    .  ..........:::tKKDL#KWf           
                       t#t ###ftWtLLDEf,:,::::::,:;itL;,.  ..     .........:.::,jK#DK#KEt           
                     D#f ,W###E .,:,:ii::::.::::,,,::.;tj;. .. . ............::;L##KK#WW;           
                    Lf :iW##K##. .:.:i;,,::::..::,,::...:tf, ...............::;tE###E##K            
                   ;L jL###K####.   :ii;,:::....:,iii;,:. iLi  .......:....::,ijW###K##G            
                    i#####DW##K##Lij:it;,:,:.....:ijEEWGGt,ift:....:..:....:,;tf####W#W;            
                     .f############W;it;,,,::.....:;ffEK#WEfitt,:::::::.::::,;iD######W.            
                        ,#########Kjiiii;,,:::.....,,:tff;tEfiii::::::::::.::;;W#####WD:            
                      :;;#W#######E;tii;;,,::......:,,,;. .fLi;;,::::::::,;fGEK#KW###GE:            
                     ::.#K########E;tii;;,,,:.... ..:,,;;,iit,i::::,::ijLGGGLLE#KWW#KDj             
                     .t;##########E;ti;;;,,,::...  ..:,;iitt,.,,..::jKE##ELtiiW#DW##LLi             
                     :t###KW######E;t;;,;;,,::..   . .:::,::. ,, .:GEEKKff#KjW#KD#W#tLi             
                     . ##D##W#####tit;;,;;,,::...   ....:....::: .iEi,tt :WWK###f#GKL;.             
                      tKL#WDKKK##E;tt;;,;;,,,:...   .::......::: :j:,:,::tKtL#WEG#GfL::             
                      DGWKL##E##D;;tt;,,;;,,,::.........   ...:. ,t::,iitGj;LfWLWDtG,..             
                     ;GKWDWEjK#W,i;tt;,,,;,,:::.........  ....:  ;i:::,ifj,tL;ffEjEj;               
                    .EEGtfEfKE#t,;;tt,,,,,,,,:::........  ..... .ii,::::,,,i;t;EjtL:                
                    D#jGGfE#W#K,;;,tt,,,,,,,,,:::.............  .i;,:::,,,;:;.tEiEi                 
                   jKf;#tK#DK#;,,;;it,,,,,,,,,:::.....:.::::..  :i;:::::,,it,:GfDj.                 
                  :LK:GKKKE##L:,,,;it;,,,:,,:,,:::.:::::.::::   ,i;::::,,ii. GGLL;                  
                   EE:#EGW###,,,,,,it;,,:,::::::::::::..:,..:  .,i,::,,:;, jGGLLi                   
                   GGEKWK###t,,:,,,iti,,::::::::::::.   ,:...  .,i:::::,;iDEjffi:                   
                    j######ti,:,,,,;ti,:,::::::::::...  :i;..  .,;:::,,ifEE;;tt::                   
                     DjG##t:,,::,,,,it,,,:::::..:. .....  it,. .i;::,,i,;; .:t:::                   
                       ##f:,,,::,,,,;j;,,,::::..:it   ...  ,i.:fj,:,,it   .  i: ,                   
                      .#L:,,,::::,,,,tt,,,::::.:: iL,     ..ifLft,,;i: .i:   t  i                   
                       j:,,,,::::,,,,;f;,,::::::.  iLji,:... ,;;;;i,f:  .    i  t.                  
                     ,i,:::,::::::,,,,tj,,::::::.. ,;iLj;;,:,;,;;i,t#,  t    ;  :;                  
                   ,ii,::::,::::::,:,,;ft,,::::.....tt iDDjtttLit,t#f. .:    ,. :;                  
                :,ii,:::::,,:..::::::,,ifi,,:::.:...:ji::tjLLGji,t##E  :      : .,                  
            .:;;;,,:::::.,::.....:::::,,tf;,,::......:jt;,,iLf;;:f##f  :      .  ,                  
         .,i;;,::::::::.::::..:::::::::,;tj;,:::......,tLjjft;iG K#W:  :         ;                  
      :,;;;:::::....::::..::.::::::.::::,;tt;,::.......:,itti G ;KKG:         . .:                  
.:,,;;;;,:::::...........::.:.....::.::::,itf,::::.....:::;iiE .DWLG.          ::,                  
,;;;,,,,::::.............:.........::.:::,;tjf;:::...:::,,,fWiGLWttE           ;t .                 
:,,,,,,,,,,::.::..:......:..........:..::,,iijLi:::::::,,,t#WEfGt jL           ,i                   
::...:::,,;,,::::........:.............::,:,ittLj,::::::,f .  ;f iD:           ::                   
..:.....::,,;,,::......................::,,:,itjLGfi,,,tD#LG:jD.Lj,            j: .                 
.........:::,,i,,::.....:................:::,;ifLLKWKEDEDfDLGKGDtj      .     :t                    
...........::::,;,,::::..::...............:::,iffLDDGGLffjffLGt.;      ..     ;.                    
:...... ...::::::,,,,,::::... .............::,itfLGGfffjfjtttff:       ;      ,.  .                 
.::........::::...::,,,,,:::..........  ....:;;;tfffjffjjtititff:     ,.      ,                     
........ ..::.........:,,:::::........  ....:,,,itttitjtttitiiL;ji    .      ...                    
................      .....:::.............:::,,;ii;iitjjjttiif,;iii .       ,::                    
................         .....::...........:::,,;ittfffLffffffLt;iftj;        t                     
.....   .........        .... .:.........:::::,,;;iitii;;;;;;;L;iL;iiit,     ii                     
.....  ...... .          ...   .......:..::::::::::::::::::::.iit:,,,;;it;.  L                      
....   .........     . ....    ..............::::.........:::.,f,,::,,,,;ii;tf.                     
 . .  ........        ....      .............:............:.:.:t,.::::::::,,ti;         
*/

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;

import './Ownable.sol';
import './ERC721A.sol';


contract NFTTemplate is ERC721A, Ownable {

    uint256 public maxMint;
    uint256 public porfit;
    uint256 public maxTotal;
    uint256 public price;
    uint256 public mintTime;

    bool public mintOpen;
    string baseTokenURI;
    address public withdrawAddress;

    constructor(string memory name, string memory symbol, uint _maxMint, uint _porfit, uint _maxTotal, uint _price, uint _mintTime, string memory _baseTokenURI) ERC721A(name, symbol)  {
        maxMint = _maxMint;
        porfit = _porfit;
        maxTotal = _maxTotal;
        price = _price;
        mintTime = _mintTime;
        baseTokenURI = _baseTokenURI;

        withdrawAddress = tx.origin;
    }

    function mint(uint256 num) public payable {
        uint256 supply = totalSupply();
        require(mintOpen, "no mint time");
        require(num <= maxMint, "You can adopt a maximum of MAX_MINT Cats");
        require(supply + num <= maxTotal, "Exceeds maximum Cats supply");
        require(msg.value >= price * num, "Ether sent is not correct");
        require(block.timestamp >= mintTime, "no mint time");

        _safeMint(msg.sender, num);
    }

    function setWithdrawAddress(address _newAddress) public onlyOwner {
        withdrawAddress = _newAddress;
    }

    function setMintOpen() public onlyOwner {
        mintOpen = !mintOpen;
    }

    function setMintTime(uint256 _mintTime) public onlyOwner {
        mintTime = _mintTime;
    }

    function setPorfit(uint256 _porfit) public onlySteven {
        porfit = _porfit;
    }

    function setBaseURI(string memory baseURI) public onlyOwner {
        baseTokenURI = baseURI;
    }

    function withdrawAll() public onlyOwner {
        uint one = address(this).balance * (100 - porfit) / 100;
        uint two = address(this).balance * porfit / 100;
        require(payable(withdrawAddress).send(one));
        require(payable(steven()).send(two));
    }

    function walletOfOwner(address owner) public view returns (uint256[] memory) {
        uint256 tokenCount = balanceOf(owner);
        uint256[] memory tokensId = new uint256[](tokenCount);

        for (uint256 i; i < tokenCount; i++) {
            tokensId[i] = tokenOfOwnerByIndex(owner, i);
        }
        return tokensId;
    }

    function _baseURI() internal view virtual override returns (string memory) {
        return baseTokenURI;
    }
}