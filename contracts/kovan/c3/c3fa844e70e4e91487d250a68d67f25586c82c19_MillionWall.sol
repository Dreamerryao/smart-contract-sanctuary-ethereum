/**
 *Submitted for verification at Etherscan.io on 2021-06-22
*/

// SPDX-License-Identifier: Free-to-use

pragma solidity 0.8.5;
 
contract MillionWall{
    address payable owner;
  
    struct advSpace{
        string base64code;
        string caption;
        string url;
        address occupiedBy;
    }
   
    mapping (uint => advSpace) pic;
    
    // setting up the prices for the advertising space. 1414 adv spaces in total
	uint16[1414] prices=[2500,9000,4900,4000,1200,2100,2100,4200,7700,1800,1600,2000,11700,4500,3600,2400,7500,2800,5600,2100,8000,10750,4000,8750,3000,7000,10500,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,150,150,150,150,150,1600,1600,1600,1600,1600,1200,7175,15000,5775,5400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,7225,7225,10200,1575,2625,1225,1750,8075,5100,2200,4600,10200,4200,7700,5000,5000,5000,5000,5000,5000,2000,2000,2000,2000,2000,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,2500,6000,12000,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,5800,8000,1200,2200,3200,1000,2800,3600,2100,3150,6650,10000,4000,5200,1600,1600,1600,1600,1600,3500,3200,1600,1600,1600,1600,1600,1600,4500,5600,11500,19200,5400,12000,4950,3850,16000,4200,4200,4200,5200,3900,1050,1050,1500,7000,4200,26000,14000,40000,47700,17000,10000,8000,2600,2600,1600,1600,1600,1600,1600,1600,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,6000,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,2800,2100,8000,6900,3000,3000,3000,3000,6400,3600,3600,8100,3000,2250,2250,3300,11000,1600,1600,2000,2000,4000,10800,12600,5100,6800,7200,4600,2600,7200,7800,6600,4800,4000,750,2250,3250,5600,8250,9000,8500,600,600,1200,3000,1000,2700,1600,800,2100,11250,3600,1200,3200,3600,1200,4800,9000,3600,1600,800,800,2400,1400,2400,1800,5600,3000,8250,3800,4750,4050,1900,1050,1050,750,2400,2400,2400,3600,800,800,800,1200,2400,2400,1800,1000,7250,8000,7200,9450,5750,1050,1350,1050,8400,11500,1750,1750,1750,9250,4600,4200,8000,5200,3600,1500,8100,10200,9000,7000,5600,9000,2100,2100,2100,2100,2400,8400,8400,6800,1200,2400,1200,4800,1200,2400,1200,2400,5400,1800,1800,4950,2700,1300,2450,4550,5000,5000,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,2000,2000,2000,2000,2000,2000,2000,2000,2000,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,1600,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,4800,3600,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,4000,2000];
		
   
    constructor() payable{
        owner = payable(msg.sender);
    }
  
    function save(uint i, string memory code, string memory caption, string memory url) public payable{
        // check if space is free
        require ( (pic[i].occupiedBy == address(0) || msg.sender == pic[i].occupiedBy) && i<1414);
        
        // check if payment is enough, caption/URL length meets the limits 
        require ( (msg.value >= prices[i]*(10**14) || msg.sender == pic[i].occupiedBy) && bytes(caption).length <= 30 && bytes(url).length <= 50);
        
        // saving the picture in the blockchain
        pic[i].base64code = code;
        pic[i].caption = caption;
        pic[i].url = url;
        pic[i].occupiedBy = msg.sender;
    }
    
    function get(uint i) public view returns (string memory, uint, string memory, address, string memory){
        return (pic[i].base64code, prices[i]*(10**14), pic[i].caption, pic[i].occupiedBy, pic[i].url);
    }
    
    function payoff(uint amount) public payable {
        require(msg.sender == owner);
        owner.transfer(amount);
    }
}